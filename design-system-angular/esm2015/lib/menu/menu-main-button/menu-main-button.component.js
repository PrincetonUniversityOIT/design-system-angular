import { Component, Input, ViewChild, ViewContainerRef } from '@angular/core';
import { HEADER_NAV_SELECTOR, ICON_CLOSE, ICON_MENU, ICON_SELECTOR, MENU_MAIN_MENU_SELECTOR, MENU_NAV_EXPANDED_STYLE, MENUBAR_SHOWN_STYLE } from '../menu-constants';
export const ARIA_EXPANDED = 'aria-expanded';
export class MenuMainButtonComponent {
    constructor(viewContainerRef) {
        this.viewContainerRef = viewContainerRef;
    }
    ngOnInit() {
        this.viewContainerRef.createEmbeddedView(this.mainButtonTemplate);
    }
    onMainMenuClick(event) {
        const icon = event.target;
        const button = icon.closest('button');
        const expandedAttr = button.getAttribute(ARIA_EXPANDED);
        const expand = !(expandedAttr && expandedAttr === 'true');
        if (!this.showCompact) {
            this.showMenu(expand, button);
        }
        else {
            this.showUtilityMenu(expand, button);
        }
        event.stopImmediatePropagation();
    }
    // tslint:disable-next-line:typedef
    showMenu(expand, button) {
        // This makes sure regardless of which button is picked that the menu elements are expanded/hidden
        const menuEl = button.closest(MENU_MAIN_MENU_SELECTOR);
        const menuToggleIcon = button.querySelector(ICON_SELECTOR);
        const navbar = menuEl.querySelector('ul');
        const navContainer = menuEl.querySelector(HEADER_NAV_SELECTOR);
        const spanEl = button.querySelector('span');
        if (expand) {
            navContainer.classList.add(MENU_NAV_EXPANDED_STYLE);
            navbar.classList.add(MENUBAR_SHOWN_STYLE);
            button.setAttribute(ARIA_EXPANDED, 'true');
            menuToggleIcon.classList.remove(ICON_MENU);
            menuToggleIcon.classList.add(ICON_CLOSE);
            spanEl.innerText = 'Open Navigation Menu';
        }
        else {
            navContainer.classList.remove(MENU_NAV_EXPANDED_STYLE);
            navbar.classList.remove(MENUBAR_SHOWN_STYLE);
            button.setAttribute(ARIA_EXPANDED, 'false');
            menuToggleIcon.classList.remove(ICON_CLOSE);
            menuToggleIcon.classList.add(ICON_MENU);
            spanEl.innerText = 'Close Navigation Menu';
        }
    }
    showUtilityMenu(expand, button) {
        const sectionEl = button.closest('.jazz-utility-header__nav');
        const iconEl = button.querySelector(ICON_SELECTOR);
        const spanEl = button.querySelector('span');
        if (sectionEl) {
            if (expand) {
                button.setAttribute(ARIA_EXPANDED, 'true');
                sectionEl.classList.add('jazz-expanded');
                iconEl.classList.remove(ICON_MENU);
                iconEl.classList.add(ICON_CLOSE);
                spanEl.innerText = 'Close Navigation Menu';
            }
            else {
                button.setAttribute(ARIA_EXPANDED, 'false');
                sectionEl.classList.remove('jazz-expanded');
                iconEl.classList.remove(ICON_CLOSE);
                iconEl.classList.add(ICON_MENU);
                spanEl.innerText = 'Open Navigation Menu';
            }
        }
    }
    getMenuText() {
        return this.showCompact ? '' : 'Menu';
    }
}
MenuMainButtonComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'jazz-menu-main-button',
                template: "<ng-template #mainButtonTemplate>\n  <button class=\"{{ buttonClass }}\" (click)='onMainMenuClick($event)'\n          aria-expanded=\"false\" aria-label=\"Navigation Menu Toggle\">\n    {{getMenuText()}}<i class=\"jazz-icon jazz-icon-menu\" aria-hidden=\"true\" (click)='onMainMenuClick($event)'></i>\n    <span class=\"jazz-visually-hidden\">Open Navigation Menu</span>\n  </button>\n</ng-template>\n"
            },] }
];
MenuMainButtonComponent.ctorParameters = () => [
    { type: ViewContainerRef }
];
MenuMainButtonComponent.propDecorators = {
    mainButtonTemplate: [{ type: ViewChild, args: ['mainButtonTemplate', { static: true },] }],
    buttonClass: [{ type: Input }],
    showCompact: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1tYWluLWJ1dHRvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9kZXNpZ24tc3lzdGVtLWFuZ3VsYXIvc3JjL2xpYi9tZW51L21lbnUtbWFpbi1idXR0b24vbWVudS1tYWluLWJ1dHRvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxLQUFLLEVBQVUsU0FBUyxFQUFFLGdCQUFnQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3BGLE9BQU8sRUFDTCxtQkFBbUIsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUMxQyxhQUFhLEVBQ2IsdUJBQXVCLEVBQ3ZCLHVCQUF1QixFQUN2QixtQkFBbUIsRUFDcEIsTUFBTSxtQkFBbUIsQ0FBQztBQUUzQixNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsZUFBZSxDQUFDO0FBTzdDLE1BQU0sT0FBTyx1QkFBdUI7SUFVbEMsWUFDVSxnQkFBa0M7UUFBbEMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtJQUN6QyxDQUFDO0lBRUosUUFBUTtRQUNOLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsZUFBZSxDQUFDLEtBQUs7UUFDbkIsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLE1BQXFCLENBQUM7UUFDekMsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0QyxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3hELE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxZQUFZLElBQUksWUFBWSxLQUFLLE1BQU0sQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQy9CO2FBQU07WUFDTCxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztTQUN0QztRQUNELEtBQUssQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFFRCxtQ0FBbUM7SUFDbkMsUUFBUSxDQUFDLE1BQU0sRUFBRSxNQUFNO1FBQ3JCLGtHQUFrRztRQUNsRyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFDdkQsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMzRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFDLE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUMvRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTVDLElBQUksTUFBTSxFQUFFO1lBQ1YsWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUNwRCxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQzNDLGNBQWMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzNDLGNBQWMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsc0JBQXNCLENBQUM7U0FDM0M7YUFBTTtZQUNMLFlBQVksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLHVCQUF1QixDQUFDLENBQUM7WUFDdkQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQztZQUM3QyxNQUFNLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUM1QyxjQUFjLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM1QyxjQUFjLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN4QyxNQUFNLENBQUMsU0FBUyxHQUFHLHVCQUF1QixDQUFDO1NBQzVDO0lBQ0gsQ0FBQztJQUVELGVBQWUsQ0FBQyxNQUFNLEVBQUUsTUFBTTtRQUM1QixNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUM7UUFDOUQsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNuRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTVDLElBQUksU0FBUyxFQUFFO1lBQ2IsSUFBSSxNQUFNLEVBQUU7Z0JBQ1YsTUFBTSxDQUFDLFlBQVksQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzNDLFNBQVMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUN6QyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDbkMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ2pDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsdUJBQXVCLENBQUM7YUFDNUM7aUJBQU07Z0JBQ0wsTUFBTSxDQUFDLFlBQVksQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzVDLFNBQVMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUM1QyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDcEMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ2hDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsc0JBQXNCLENBQUM7YUFDM0M7U0FDRjtJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1QsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUN4QyxDQUFDOzs7WUF0RkYsU0FBUyxTQUFDO2dCQUNULDhDQUE4QztnQkFDOUMsUUFBUSxFQUFFLHVCQUF1QjtnQkFDakMsNlpBQWdEO2FBQ2pEOzs7WUFmNEMsZ0JBQWdCOzs7aUNBa0IxRCxTQUFTLFNBQUMsb0JBQW9CLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDOzBCQUU5QyxLQUFLOzBCQUdMLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgVmlld0NoaWxkLCBWaWV3Q29udGFpbmVyUmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIEhFQURFUl9OQVZfU0VMRUNUT1IsIElDT05fQ0xPU0UsIElDT05fTUVOVSxcbiAgSUNPTl9TRUxFQ1RPUixcbiAgTUVOVV9NQUlOX01FTlVfU0VMRUNUT1IsXG4gIE1FTlVfTkFWX0VYUEFOREVEX1NUWUxFLFxuICBNRU5VQkFSX1NIT1dOX1NUWUxFXG59IGZyb20gJy4uL21lbnUtY29uc3RhbnRzJztcblxuZXhwb3J0IGNvbnN0IEFSSUFfRVhQQU5ERUQgPSAnYXJpYS1leHBhbmRlZCc7XG5cbkBDb21wb25lbnQoe1xuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Y29tcG9uZW50LXNlbGVjdG9yXG4gIHNlbGVjdG9yOiAnamF6ei1tZW51LW1haW4tYnV0dG9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL21lbnUtbWFpbi1idXR0b24uY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIE1lbnVNYWluQnV0dG9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBAVmlld0NoaWxkKCdtYWluQnV0dG9uVGVtcGxhdGUnLCB7c3RhdGljOiB0cnVlfSkgbWFpbkJ1dHRvblRlbXBsYXRlO1xuXG4gIEBJbnB1dCgpXG4gIGJ1dHRvbkNsYXNzOiBzdHJpbmc7XG5cbiAgQElucHV0KClcbiAgc2hvd0NvbXBhY3Q6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB2aWV3Q29udGFpbmVyUmVmOiBWaWV3Q29udGFpbmVyUmVmXG4gICkge31cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnZpZXdDb250YWluZXJSZWYuY3JlYXRlRW1iZWRkZWRWaWV3KHRoaXMubWFpbkJ1dHRvblRlbXBsYXRlKTtcbiAgfVxuXG4gIG9uTWFpbk1lbnVDbGljayhldmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGljb24gPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgY29uc3QgYnV0dG9uID0gaWNvbi5jbG9zZXN0KCdidXR0b24nKTtcbiAgICBjb25zdCBleHBhbmRlZEF0dHIgPSBidXR0b24uZ2V0QXR0cmlidXRlKEFSSUFfRVhQQU5ERUQpO1xuICAgIGNvbnN0IGV4cGFuZCA9ICEoZXhwYW5kZWRBdHRyICYmIGV4cGFuZGVkQXR0ciA9PT0gJ3RydWUnKTtcbiAgICBpZiAoIXRoaXMuc2hvd0NvbXBhY3QpIHtcbiAgICAgIHRoaXMuc2hvd01lbnUoZXhwYW5kLCBidXR0b24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dVdGlsaXR5TWVudShleHBhbmQsIGJ1dHRvbik7XG4gICAgfVxuICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnR5cGVkZWZcbiAgc2hvd01lbnUoZXhwYW5kLCBidXR0b24pIHtcbiAgICAvLyBUaGlzIG1ha2VzIHN1cmUgcmVnYXJkbGVzcyBvZiB3aGljaCBidXR0b24gaXMgcGlja2VkIHRoYXQgdGhlIG1lbnUgZWxlbWVudHMgYXJlIGV4cGFuZGVkL2hpZGRlblxuICAgIGNvbnN0IG1lbnVFbCA9IGJ1dHRvbi5jbG9zZXN0KE1FTlVfTUFJTl9NRU5VX1NFTEVDVE9SKTtcbiAgICBjb25zdCBtZW51VG9nZ2xlSWNvbiA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKElDT05fU0VMRUNUT1IpO1xuICAgIGNvbnN0IG5hdmJhciA9IG1lbnVFbC5xdWVyeVNlbGVjdG9yKCd1bCcpO1xuICAgIGNvbnN0IG5hdkNvbnRhaW5lciA9IG1lbnVFbC5xdWVyeVNlbGVjdG9yKEhFQURFUl9OQVZfU0VMRUNUT1IpO1xuICAgIGNvbnN0IHNwYW5FbCA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XG5cbiAgICBpZiAoZXhwYW5kKSB7XG4gICAgICBuYXZDb250YWluZXIuY2xhc3NMaXN0LmFkZChNRU5VX05BVl9FWFBBTkRFRF9TVFlMRSk7XG4gICAgICBuYXZiYXIuY2xhc3NMaXN0LmFkZChNRU5VQkFSX1NIT1dOX1NUWUxFKTtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoQVJJQV9FWFBBTkRFRCwgJ3RydWUnKTtcbiAgICAgIG1lbnVUb2dnbGVJY29uLmNsYXNzTGlzdC5yZW1vdmUoSUNPTl9NRU5VKTtcbiAgICAgIG1lbnVUb2dnbGVJY29uLmNsYXNzTGlzdC5hZGQoSUNPTl9DTE9TRSk7XG4gICAgICBzcGFuRWwuaW5uZXJUZXh0ID0gJ09wZW4gTmF2aWdhdGlvbiBNZW51JztcbiAgICB9IGVsc2Uge1xuICAgICAgbmF2Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoTUVOVV9OQVZfRVhQQU5ERURfU1RZTEUpO1xuICAgICAgbmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoTUVOVUJBUl9TSE9XTl9TVFlMRSk7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKEFSSUFfRVhQQU5ERUQsICdmYWxzZScpO1xuICAgICAgbWVudVRvZ2dsZUljb24uY2xhc3NMaXN0LnJlbW92ZShJQ09OX0NMT1NFKTtcbiAgICAgIG1lbnVUb2dnbGVJY29uLmNsYXNzTGlzdC5hZGQoSUNPTl9NRU5VKTtcbiAgICAgIHNwYW5FbC5pbm5lclRleHQgPSAnQ2xvc2UgTmF2aWdhdGlvbiBNZW51JztcbiAgICB9XG4gIH1cblxuICBzaG93VXRpbGl0eU1lbnUoZXhwYW5kLCBidXR0b24pOiB2b2lkIHtcbiAgICBjb25zdCBzZWN0aW9uRWwgPSBidXR0b24uY2xvc2VzdCgnLmphenotdXRpbGl0eS1oZWFkZXJfX25hdicpO1xuICAgIGNvbnN0IGljb25FbCA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKElDT05fU0VMRUNUT1IpO1xuICAgIGNvbnN0IHNwYW5FbCA9IGJ1dHRvbi5xdWVyeVNlbGVjdG9yKCdzcGFuJyk7XG5cbiAgICBpZiAoc2VjdGlvbkVsKSB7XG4gICAgICBpZiAoZXhwYW5kKSB7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoQVJJQV9FWFBBTkRFRCwgJ3RydWUnKTtcbiAgICAgICAgc2VjdGlvbkVsLmNsYXNzTGlzdC5hZGQoJ2phenotZXhwYW5kZWQnKTtcbiAgICAgICAgaWNvbkVsLmNsYXNzTGlzdC5yZW1vdmUoSUNPTl9NRU5VKTtcbiAgICAgICAgaWNvbkVsLmNsYXNzTGlzdC5hZGQoSUNPTl9DTE9TRSk7XG4gICAgICAgIHNwYW5FbC5pbm5lclRleHQgPSAnQ2xvc2UgTmF2aWdhdGlvbiBNZW51JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoQVJJQV9FWFBBTkRFRCwgJ2ZhbHNlJyk7XG4gICAgICAgIHNlY3Rpb25FbC5jbGFzc0xpc3QucmVtb3ZlKCdqYXp6LWV4cGFuZGVkJyk7XG4gICAgICAgIGljb25FbC5jbGFzc0xpc3QucmVtb3ZlKElDT05fQ0xPU0UpO1xuICAgICAgICBpY29uRWwuY2xhc3NMaXN0LmFkZChJQ09OX01FTlUpO1xuICAgICAgICBzcGFuRWwuaW5uZXJUZXh0ID0gJ09wZW4gTmF2aWdhdGlvbiBNZW51JztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRNZW51VGV4dCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnNob3dDb21wYWN0ID8gJycgOiAnTWVudSc7XG4gIH1cblxufVxuIl19